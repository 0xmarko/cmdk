"use client";import{a as le}from"./chunk-NZJY6EH4.mjs";import*as k from"@radix-ui/react-dialog";import*as t from"react";import{Primitive as M}from"@radix-ui/react-primitive";import{useId as O}from"@radix-ui/react-id";import{composeRefs as B}from"@radix-ui/react-compose-refs";var K='[cmdk-group=""]',ee='[cmdk-group-items=""]',he='[cmdk-group-heading=""]',de='[cmdk-item=""]',ue=`${de}:not([aria-disabled="true"])`,te="cmdk-item-select",H="data-value",Ee=(r,o,n)=>le(r,o,n),fe=t.createContext(void 0),j=()=>t.useContext(fe),me=t.createContext(void 0),ne=()=>t.useContext(me),pe=t.createContext(void 0),ve=t.forwardRef((r,o)=>{let n=A(()=>{var e,a;return{search:"",value:(a=(e=r.value)!=null?e:r.defaultValue)!=null?a:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),u=A(()=>new Set),c=A(()=>new Map),d=A(()=>new Map),f=A(()=>new Set),p=ge(r),{label:g,children:m,value:b,onValueChange:x,filter:C,shouldFilter:S,loop:_,disablePointerSelection:Re=!1,vimBindings:z=!0,async:V=!1,fetchInProgress:W=!1,...T}=r,F=O(),$=O(),h=O(),I=t.useRef(null),P=Te();w(()=>{if(b!==void 0){let e=b.trim();n.current.value=e,y.emit()}},[b]),w(()=>{V&&!W&&P(1,q)},[V,W]),w(()=>{P(6,oe)},[]);let y=t.useMemo(()=>({subscribe:e=>(f.current.add(e),()=>f.current.delete(e)),snapshot:()=>n.current,setState:(e,a,s)=>{var i,l,v,E;if(!Object.is(n.current[e],a)){if(n.current[e]=a,e==="search")Q(),X(),V||P(1,q);else if(e==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let R=document.getElementById(h);R?R.focus():(i=document.getElementById(F))==null||i.focus()}if(P(7,()=>{var R;n.current.selectedItemId=(R=L())==null?void 0:R.id,y.emit()}),s||P(5,oe),((l=p.current)==null?void 0:l.value)!==void 0){let R=a!=null?a:"";(E=(v=p.current).onValueChange)==null||E.call(v,R);return}}y.emit()}},emit:()=>{f.current.forEach(e=>e())}}),[V]),J=t.useMemo(()=>({value:(e,a,s)=>{var i;a!==((i=d.current.get(e))==null?void 0:i.value)&&(d.current.set(e,{value:a,keywords:s}),n.current.filtered.items.set(e,re(a,s)),P(2,()=>{X(),y.emit()}))},item:(e,a)=>(u.current.add(e),a&&(c.current.has(a)?c.current.get(a).add(e):c.current.set(a,new Set([e]))),P(3,()=>{Q(),X(),n.current.value||q(),y.emit()}),()=>{d.current.delete(e),u.current.delete(e),n.current.filtered.items.delete(e);let s=L();P(4,()=>{Q(),(s==null?void 0:s.getAttribute("id"))===e&&q(),y.emit()})}),group:e=>(c.current.has(e)||c.current.set(e,new Set),()=>{d.current.delete(e),c.current.delete(e)}),filter:()=>p.current.shouldFilter,label:g||r["aria-label"],getDisablePointerSelection:()=>p.current.disablePointerSelection,listId:F,inputId:h,labelId:$,listInnerRef:I}),[]);function re(e,a){var i,l;let s=(l=(i=p.current)==null?void 0:i.filter)!=null?l:Ee;return e?s(e,n.current.search,a):0}function X(){if(!n.current.search||p.current.shouldFilter===!1)return;let e=n.current.filtered.items,a=[];n.current.filtered.groups.forEach(i=>{let l=c.current.get(i),v=0;l.forEach(E=>{let R=e.get(E);v=Math.max(R,v)}),a.push([i,v])});let s=I.current;N().sort((i,l)=>{var R,G;let v=i.getAttribute("id"),E=l.getAttribute("id");return((R=e.get(E))!=null?R:0)-((G=e.get(v))!=null?G:0)}).forEach(i=>{let l=i.closest(ee);l?l.appendChild(i.parentElement===l?i:i.closest(`${ee} > *`)):s.appendChild(i.parentElement===s?i:i.closest(`${ee} > *`))}),a.sort((i,l)=>l[1]-i[1]).forEach(i=>{var v;let l=(v=I.current)==null?void 0:v.querySelector(`${K}[${H}="${encodeURIComponent(i[0])}"]`);l==null||l.parentElement.appendChild(l)})}function q(){let e=N().find(s=>s.getAttribute("aria-disabled")!=="true"),a=e==null?void 0:e.getAttribute(H);y.setState("value",a||void 0)}function Q(){var a,s,i,l;if(!n.current.search||p.current.shouldFilter===!1){n.current.filtered.count=u.current.size;return}n.current.filtered.groups=new Set;let e=0;for(let v of u.current){let E=(s=(a=d.current.get(v))==null?void 0:a.value)!=null?s:"",R=(l=(i=d.current.get(v))==null?void 0:i.keywords)!=null?l:[],G=re(E,R);n.current.filtered.items.set(v,G),G>0&&e++}for(let[v,E]of c.current)for(let R of E)if(n.current.filtered.items.get(R)>0){n.current.filtered.groups.add(v);break}n.current.filtered.count=e}function oe(){var a,s,i;let e=L();e&&(((a=e.parentElement)==null?void 0:a.firstChild)===e&&((i=(s=e.closest(K))==null?void 0:s.querySelector(he))==null||i.scrollIntoView({block:"nearest"})),e.scrollIntoView({block:"nearest"}))}function L(){var e;return(e=I.current)==null?void 0:e.querySelector(`${de}[aria-selected="true"]`)}function N(){var e;return Array.from(((e=I.current)==null?void 0:e.querySelectorAll(ue))||[])}function Y(e){let s=N()[e];s&&y.setState("value",s.getAttribute(H))}function Z(e){var v;let a=L(),s=N(),i=s.findIndex(E=>E===a),l=s[i+e];(v=p.current)!=null&&v.loop&&(l=i+e<0?s[s.length-1]:i+e===s.length?s[0]:s[i+e]),l&&y.setState("value",l.getAttribute(H))}function ie(e){let a=L(),s=a==null?void 0:a.closest(K),i;for(;s&&!i;)s=e>0?ke(s,K):Me(s,K),i=s==null?void 0:s.querySelector(ue);i?y.setState("value",i.getAttribute(H)):Z(e)}let se=()=>Y(N().length-1),ae=e=>{e.preventDefault(),e.metaKey?se():e.altKey?ie(1):Z(1)},ce=e=>{e.preventDefault(),e.metaKey?Y(0):e.altKey?ie(-1):Z(-1)};return t.createElement(M.div,{ref:o,tabIndex:-1,...T,"cmdk-root":"",onKeyDown:e=>{var s;(s=T.onKeyDown)==null||s.call(T,e);let a=e.nativeEvent.isComposing||e.keyCode===229;if(!(e.defaultPrevented||a))switch(e.key){case"n":case"j":{z&&e.ctrlKey&&ae(e);break}case"ArrowDown":{ae(e);break}case"p":case"k":{z&&e.ctrlKey&&ce(e);break}case"ArrowUp":{ce(e);break}case"Home":{e.preventDefault(),Y(0);break}case"End":{e.preventDefault(),se();break}case"Enter":{e.preventDefault();let i=L();if(i){let l=new Event(te);i.dispatchEvent(l)}}}}},t.createElement("label",{"cmdk-label":"",htmlFor:J.inputId,id:J.labelId,style:He},g),U(r,e=>t.createElement(me.Provider,{value:y},t.createElement(fe.Provider,{value:J},e))))}),ye=t.forwardRef((r,o)=>{var F,$;let n=O(),u=t.useRef(null),c=t.useContext(pe),d=j(),f=ge(r),p=($=(F=f.current)==null?void 0:F.forceMount)!=null?$:c==null?void 0:c.forceMount;w(()=>{if(!p)return d.item(n,c==null?void 0:c.id)},[p]);let g=be(n,u,[r.value,r.children,u],r.keywords),m=ne(),b=D(h=>h.value&&h.value===g.current),x=D(h=>p||d.filter()===!1?!0:h.search?h.filtered.items.get(n)>0:!0);t.useEffect(()=>{let h=u.current;if(!(!h||r.disabled))return h.addEventListener(te,C),()=>h.removeEventListener(te,C)},[x,r.onSelect,r.disabled]);function C(){var h,I;S(),(I=(h=f.current).onSelect)==null||I.call(h,g.current)}function S(){m.setState("value",g.current,!0)}if(!x)return null;let{disabled:_,value:Re,onSelect:z,forceMount:V,keywords:W,...T}=r;return t.createElement(M.div,{ref:B(u,o),...T,id:n,"cmdk-item":"",role:"option","aria-disabled":!!_,"aria-selected":!!b,"data-disabled":!!_,"data-selected":!!b,onPointerMove:_||d.getDisablePointerSelection()?void 0:S,onClick:_?void 0:C},r.children)}),Se=t.forwardRef((r,o)=>{let{heading:n,children:u,forceMount:c,...d}=r,f=O(),p=t.useRef(null),g=t.useRef(null),m=O(),b=j(),x=D(S=>c||b.filter()===!1?!0:S.search?S.filtered.groups.has(f):!0);w(()=>b.group(f),[]),be(f,p,[r.value,r.heading,g]);let C=t.useMemo(()=>({id:f,forceMount:c}),[c]);return t.createElement(M.div,{ref:B(p,o),...d,"cmdk-group":"",role:"presentation",hidden:x?void 0:!0},n&&t.createElement("div",{ref:g,"cmdk-group-heading":"","aria-hidden":!0,id:m},n),U(r,S=>t.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?m:void 0},t.createElement(pe.Provider,{value:C},S))))}),Ce=t.forwardRef((r,o)=>{let{alwaysRender:n,...u}=r,c=t.useRef(null),d=D(f=>!f.search);return!n&&!d?null:t.createElement(M.div,{ref:B(c,o),...u,"cmdk-separator":"",role:"separator"})}),xe=t.forwardRef((r,o)=>{let{onValueChange:n,...u}=r,c=r.value!=null,d=ne(),f=D(m=>m.search),p=D(m=>m.selectedItemId),g=j();return t.useEffect(()=>{r.value!=null&&d.setState("search",r.value)},[r.value]),t.createElement(M.input,{ref:o,...u,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":g.listId,"aria-labelledby":g.labelId,"aria-activedescendant":p,id:g.inputId,type:"text",value:c?r.value:f,onChange:m=>{c||d.setState("search",m.target.value),n==null||n(m.target.value)}})}),Ie=t.forwardRef((r,o)=>{let{children:n,label:u="Suggestions",...c}=r,d=t.useRef(null),f=t.useRef(null),p=D(m=>m.selectedItemId),g=j();return t.useEffect(()=>{if(f.current&&d.current){let m=f.current,b=d.current,x,C=new ResizeObserver(()=>{x=requestAnimationFrame(()=>{let S=m.offsetHeight;b.style.setProperty("--cmdk-list-height",S.toFixed(1)+"px")})});return C.observe(m),()=>{cancelAnimationFrame(x),C.unobserve(m)}}},[]),t.createElement(M.div,{ref:B(d,o),...c,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":p,"aria-label":u,id:g.listId},U(r,m=>t.createElement("div",{ref:B(f,g.listInnerRef),"cmdk-list-sizer":""},m)))}),Pe=t.forwardRef((r,o)=>{let{open:n,onOpenChange:u,overlayClassName:c,contentClassName:d,container:f,...p}=r;return t.createElement(k.Root,{open:n,onOpenChange:u},t.createElement(k.Portal,{container:f},t.createElement(k.Overlay,{"cmdk-overlay":"",className:c}),t.createElement(k.Content,{"aria-label":r.label,"cmdk-dialog":"",className:d},t.createElement(ve,{ref:o,...p}))))}),we=t.forwardRef((r,o)=>D(u=>u.filtered.count===0)?t.createElement(M.div,{ref:o,...r,"cmdk-empty":"",role:"presentation"}):null),De=t.forwardRef((r,o)=>{let{progress:n,children:u,label:c="Loading...",...d}=r;return t.createElement(M.div,{ref:o,...d,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":c},U(r,f=>t.createElement("div",{"aria-hidden":!0},f)))}),Fe=Object.assign(ve,{List:Ie,Item:ye,Input:xe,Group:Se,Separator:Ce,Dialog:Pe,Empty:we,Loading:De});function ke(r,o){let n=r.nextElementSibling;for(;n;){if(n.matches(o))return n;n=n.nextElementSibling}}function Me(r,o){let n=r.previousElementSibling;for(;n;){if(n.matches(o))return n;n=n.previousElementSibling}}function ge(r){let o=t.useRef(r);return w(()=>{o.current=r}),o}var w=typeof window=="undefined"?t.useEffect:t.useLayoutEffect;function A(r){let o=t.useRef();return o.current===void 0&&(o.current=r()),o}function D(r){let o=ne(),n=()=>r(o.snapshot());return t.useSyncExternalStore(o.subscribe,n,n)}function be(r,o,n,u=[]){let c=t.useRef(),d=j();return w(()=>{var g;let f=(()=>{var m;for(let b of n){if(typeof b=="string")return b.trim();if(typeof b=="object"&&"current"in b)return b.current?(m=b.current.textContent)==null?void 0:m.trim():c.current}})(),p=u.map(m=>m.trim());d.value(r,f,p),(g=o.current)==null||g.setAttribute(H,f),c.current=f}),c}var Te=()=>{let[r,o]=t.useState(),n=A(()=>new Map);return w(()=>{n.current.forEach(u=>u()),n.current=new Map},[r]),(u,c)=>{n.current.set(u,c),o({})}};function Le(r){let o=r.type;return typeof o=="function"?o(r.props):"render"in o?o.render(r.props):r}function U({asChild:r,children:o},n){return r&&t.isValidElement(o)?t.cloneElement(Le(o),{ref:o.ref},n(o.props.children)):n(o)}var He={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};export{Fe as Command,Pe as CommandDialog,we as CommandEmpty,Se as CommandGroup,xe as CommandInput,ye as CommandItem,Ie as CommandList,De as CommandLoading,ve as CommandRoot,Ce as CommandSeparator,Ee as defaultFilter,D as useCommandState};
